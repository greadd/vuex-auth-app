(function(e){function t(t){for(var r,a,i=t[0],s=t[1],u=t[2],l=0,d=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);f&&f(t);while(d.length)d.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==o[i]&&(r=!1)}r&&(c.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o={app:0},c=[];function i(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-b11fc6c2":"f782d1da","chunk-e19c7a44":"5793f307","chunk-2d0aa22f":"759a9275","chunk-2d0d6d35":"04a260be","chunk-2d2086b7":"1b7911e7"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-b11fc6c2":1,"chunk-e19c7a44":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-b11fc6c2":"e2374779","chunk-e19c7a44":"475c81ce","chunk-2d0aa22f":"31d6cfe0","chunk-2d0d6d35":"31d6cfe0","chunk-2d2086b7":"31d6cfe0"}[e]+".css",o=s.p+r,c=document.getElementsByTagName("link"),i=0;i<c.length;i++){var u=c[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=r,delete a[e],f.parentNode.removeChild(f),n(c)},f.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var c=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=c);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=i(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}o[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=l;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{app:""}},[n(e.layout,{tag:"component"},[n("router-view")],1),n("v-snackbar",{staticClass:"rounded-xl",attrs:{timeout:2e3,color:e.snackbar.color,top:"","content-class":"text-center"},model:{value:e.snackbar.showing,callback:function(t){e.$set(e.snackbar,"showing",t)},expression:"snackbar.showing"}},[e._v(" "+e._s(e.snackbar.text)+" "),n("v-btn",{attrs:{absolute:"",right:"","x-small":"",icon:""},on:{click:function(t){e.snackbar.showing=!1}}},[n("v-icon",[e._v("mdi-close")])],1)],1)],1)},o=[],c=n("5530"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-main",{staticClass:"blue lighten-3 "},[n("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("router-view")],1)],1)],1)],1)},s=[],u=n("2877"),l=n("6544"),d=n.n(l),f=n("7496"),p=n("a523"),m=n("f6c4"),h=n("0fd9"),v={},g=Object(u["a"])(v,i,s,!1,null,null,null),b=g.exports;d()(g,{VApp:f["a"],VContainer:p["a"],VMain:m["a"],VRow:h["a"]});var k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{app:""}},[n("Navbar"),n("v-main",{staticClass:"blue lighten-5 mt-6"},[n("v-container",{attrs:{fluid:""}},[n("router-view")],1)],1)],1)},w=[],y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app-bar",{attrs:{app:"",color:"blue darken-1",elevation:"4"}},[e.loading?n("Loader"):e._e(),n("v-toolbar-title",{staticClass:"white--text"},[e._v("Emphasoft")]),n("v-divider",{staticClass:"mx-6 white d-none d-sm-block",attrs:{inset:"",vertical:""}}),n("v-toolbar-title",{staticClass:"white--text d-none d-sm-block"},[e._v(e._s(e.date))]),n("v-spacer"),n("v-btn",{staticClass:"rounded-lg",attrs:{color:"white"},on:{click:e.logout}},[n("v-icon",[e._v("mdi-logout")]),e._v("Выйти")],1)],1)},O=[],j=(n("96cf"),n("1da1")),x={data:function(){return{loading:!1,date:null,interval:null}},methods:{logout:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$store.dispatch("logout");case 3:e.$store.dispatch("setSnackbar",{text:"Вы вышли из системы"}),e.$router.push("/login");case 5:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;this.interval=setInterval((function(){e.date=(new Date).toLocaleDateString("ru-RU",{year:"numeric",month:"2-digit",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}))},beforeDestroy:function(){clearInterval(this.interval)}},S=x,_=n("40dc"),C=n("8336"),E=n("ce7e"),V=n("132d"),A=n("2fa4"),T=n("2a7f"),I=Object(u["a"])(S,y,O,!1,null,null,null),N=I.exports;d()(I,{VAppBar:_["a"],VBtn:C["a"],VDivider:E["a"],VIcon:V["a"],VSpacer:A["a"],VToolbarTitle:T["a"]});var P={data:function(){return{}},components:{Navbar:N}},R=P,L=Object(u["a"])(R,k,w,!1,null,null,null),$=L.exports;d()(L,{VApp:f["a"],VContainer:p["a"],VMain:m["a"]});var B=n("2f62"),J={computed:Object(c["a"])(Object(c["a"])({},Object(B["b"])(["snackbar"])),{},{layout:function(){return(this.$route.meta.layout||"empty")+"-layout"}}),components:{EmptyLayout:b,MainLayout:$}},M=J,U=n("2db4"),D=Object(u["a"])(M,a,o,!1,null,null,null),z=D.exports;d()(D,{VApp:f["a"],VBtn:C["a"],VIcon:V["a"],VSnackbar:U["a"]});var q=n("9483");Object(q["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("45fc"),n("d3b7");var F=n("8c4f");r["a"].use(F["a"]);var H=[{path:"/",name:"Profile",meta:{layout:"main",auth:!0},component:function(){return n.e("chunk-b11fc6c2").then(n.bind(null,"c66d"))}},{path:"/edit",name:"Edit",meta:{layout:"main",auth:!0},component:function(){return Promise.all([n.e("chunk-e19c7a44"),n.e("chunk-2d0aa22f")]).then(n.bind(null,"1071"))}},{path:"/login",name:"Login",meta:{layout:"empty"},component:function(){return Promise.all([n.e("chunk-e19c7a44"),n.e("chunk-2d2086b7")]).then(n.bind(null,"a55b"))}},{path:"/register",name:"Register",meta:{layout:"empty"},component:function(){return Promise.all([n.e("chunk-e19c7a44"),n.e("chunk-2d0d6d35")]).then(n.bind(null,"73cf"))}}],K=new F["a"]({mode:"history",base:"/",routes:H});K.beforeEach((function(e,t,n){var r=e.matched.some((function(e){return e.meta.auth})),a=JSON.parse(localStorage.getItem("user"));r&&!a?n("/login"):n()}));var G=K,Q=(n("7db0"),n("bc3a")),W=n.n(Q),X="https://emphasoft-test-assignment.herokuapp.com/",Y={state:{token:localStorage.getItem("token")||"",user:JSON.parse(localStorage.getItem("user"))||""},mutations:{setToken:function(e,t){e.token=t},setUser:function(e,t){var n=Object.assign({},t);e.user=Object(c["a"])({},n)},logout:function(e){e.user="",e.token=""}},actions:{setToken:function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function n(){var r,a,o,c,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=t.username,o=t.password,n.next=4,W.a.post(X+"api-token-auth/",{username:a,password:o});case 4:c=n.sent,i=c.data.token,W.a.defaults.headers.common["Authorization"]="Token "+i,r("setToken",i),localStorage.setItem("token",i);case 9:case"end":return n.stop()}}),n)})))()},setUser:function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function n(){var r,a,o,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=t.username,n.next=4,W.a.get(X+"api/v1/users/");case 4:o=n.sent,c=o.data.find((function(e){return e.username===a})),r("setUser",c),localStorage.setItem("user",JSON.stringify(c));case 8:case"end":return n.stop()}}),n)})))()},register:function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=Object.assign({},t),n.next=4,W.a.post(X+"api/v1/users/",Object(c["a"])({},a),{headers:{Authorization:"Token 781bd9f1de084f4daa7ba2aa8a71a2eab855354e"}});case 4:o=n.sent,r("setUser",o.data),localStorage.setItem("user",JSON.stringify(o.data));case 7:case"end":return n.stop()}}),n)})))()},logout:function(e){return Object(j["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.commit,localStorage.removeItem("token"),localStorage.removeItem("user"),delete W.a.defaults.headers.common["Authorization"],n("logout");case 5:case"end":return t.stop()}}),t)})))()},updateInfo:function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.getters,n.next=3,W.a.patch(X+"api/v1/users/".concat(a.user.id,"/"),t,{headers:{Authorization:"Token "+a.token}});case 3:o=n.sent,r("setUser",o.data),localStorage.setItem("user",JSON.stringify(o.data));case 6:case"end":return n.stop()}}),n)})))()}},getters:{token:function(e){return e.token},user:function(e){return e.user}}};r["a"].use(B["a"]);var Z=new B["a"].Store({state:{snackbar:{}},mutations:{setSnackbar:function(e,t){e.snackbar=t}},actions:{setSnackbar:function(e,t){var n=e.commit;t.showing=!0,n("setSnackbar",t)}},modules:{auth:Y},getters:{}}),ee=n("f309");r["a"].use(ee["a"]);var te=new ee["a"]({}),ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-overlay",[n("v-progress-circular",{attrs:{indeterminate:"",size:"80"}})],1)},re=[],ae=n("a797"),oe=n("490a"),ce={},ie=Object(u["a"])(ce,ne,re,!1,null,null,null),se=ie.exports;d()(ie,{VOverlay:ae["a"],VProgressCircular:oe["a"]}),r["a"].config.productionTip=!1,r["a"].component("Loader",se),new r["a"]({router:G,store:Z,vuetify:te,render:function(e){return e(z)}}).$mount("#app")}});
//# sourceMappingURL=app.5358dccb.js.map